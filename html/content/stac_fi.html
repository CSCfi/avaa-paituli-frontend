<h1>Paituli STAC - Spatio Temporal Asset Catalog</h1>

<p>
	<a href="https://stacspec.org/en/" target="_blank">STAC</a> on spesifikaatio paikkatiedon kuvailemiseksi, jolla on ajallinen ulottuvuus. Se huomattavasti helpottaa aineistojen <strong>etsimistä ja lataamista</strong>. 
	STAC sisältää vain aineistojen metatietoja ja linkkejä varsinaisiin tiedostoihin, jotka ovat yleisesti tallennettuna pilvessä. 	STAC on eniten käytettynä kaukokartoituskuvien ja muun rasteridatan kanssa, mutta sitä voidaan käyttää myös vektori- ja pistepilviaineistojen kanssa. STAC sopii parhaiten aikasarjoja käsitteleviin käyttötapauksiin.
</p>

<p>
	STAC pääkäsitteet (suomennokset eivät ole vakiintuneita): 
</p>

<ul dir="auto">
	<li><strong>Catalog</strong> (suom. Luettelo) - yleinen palvelun metatieto ja linkit saatavilla oleviin Kokoelmiin. Esimerkki: Paituli STAC</li>
	<li><strong>Collection</strong> (suom. Kokoelma)- Kokoelmaan liittyvä metatieto ja linkit saatavilla oleviin Tuotteisiin. Yksi Kokoelma sisältää samantyyppisiä Tuotteita. Esimerkki: ESA/SYKE, Sentinel-2 kuukausittaiset indeksimosaiikit </li>
	<li><strong>Item</strong> (suom. Tuote) - ydinyksikkö, joka kuvailee dataa tietyltä ajalta ja paikalta. Tuote sisältää yhden tai useampia Resursseja. Esimerkki: ESA/SYKE, Sentinel-2 kuukausittaiset indeksimosaiikit alueelta X ja ajankohtasta Y</li>
	<li><strong>Asset</strong> (suom. Resurssi)- Tuotteeseen liittyvät tiedostot ja linkit, jotka voivat olla datatiedostoja tai linkkejä metatietoon jne. Esimerkki: NDVI indeksi ESA/SYKE, Sentinel-2 kuukausittaiset indeksimosaiikit alueelta X ja ajankohtasta Y. Aineisto sisältää myös muita indekseja, josta jokainen on Resurssi, sillä jokainen indeksi on tallennettu erilliseen tiedostoon. </li>
</ul>

<img align=middle src="./STAC.png" style="width: 100%"/>

<p>	
	STAC luetteloita on olemassa maailmanlaajuisesti ja STAC Index -sivusto sisältää <a href="https://stacindex.org/catalogs" target="_blank">listan STAC luetteloista</a>. STAC Index tarjoaa myös hyvän mahdollisuuden tutusta luetteloihin.	
</p>

<p>
	Etsiessä dataa STAC luetteloista tärkeimmät kriteerit ovat sijainti, aika sekä kokoelman nimi. 
	Tuotteet voivat sisältää myös lisätietoja, esimerkiksi kaukokartoituksen optisten kuvien pilvisyyttä, jota voidaan sisällyttää hakuehdoissa.

</p>

<p>
	STAC on mahdollista toteuttaa <strong>staattisena</strong> kokoelmana JSON-tiedostoja tai <strong>ohjelmointirajapintana (API:na)</strong>. STAC API tukee nopeaa hakua myös isoista aineistoista, jossa on tuhansia tai miljoonia tuotteita.
</p>
		
<p>	
	Paras tallennusvaihtoehto STAC aineistoille on pilvioptimoitu tiedostomuoto: <a href="https://www.cogeo.org/"> Cloud-Optimized GeoTiff (COG)</a> rasteriaineistoille ja <a href="https://copc.io/">COPC</a> pistepilviaineistoille. Pilvioptimoitut tiedostomuotot mahdollistavat aineistojen osittaisen latauksen, näin että ladataan vain tietty alue tai vain yleistetty versio aineistosta. Myös muita tiedostomuotoja voidaan käyttää, mutta riippuen niiden sisäisistä rakenteista osittainen lataus voi toimia vähemmän optimaalisesti.
</p>

<p>	
	Jotta STAC rajapintaa voi hyödyntää aineistojen etsimiseen, tarvitaan erillisiä <strong>työkaluja</strong>.
	<a href="https://stacindex.org/ecosystem#/" target="_blank">STAC loppukäyttäjän työkaluja</a> on tarjolla 
	<a href="https://pystac-client.readthedocs.io/en/latest" target="_blank">Pythonille </a>, 
	<a href="https://cran.r-project.org/web/packages/rstac/index.html" target="_blank">R:lle</a>, 
	<a href="https://stac-utils.github.io/qgis-stac-plugin/" target="_blank">QGIS:lle</a> 
	sekä <a href="https://github.com/JuliaClimate/STAC.jl" target="_blank">Julia:lle</a>. 
	Pythonille ja R:lle on olemassa lisäksi kirjastoja aika-ulottuvuuden sisältävän rasteridatan lataukseen ja analysointiin. Nämä työkalut tukevat myös rinnakkaislaskentaa, jolloin suurten aineistojen käsittely on helposti mahdollista.
	<a href="https://radiantearth.github.io/stac-browser/" target="_blank">STAC Browser:ia</a> voi käyttää etsimään tietoa STAC rajapinnasta selaimen avulla. Jokaisella STAC luettelolla on osoite, joka pitää antaa työkaluille luettolen löytäämiseksi.
</p>

<h2>Paituli STAC sisältö</h2>	
<p> Paituli STAC luettelo sisältää suomalaista dataa. Tällä hetkellä se sisältää:

<ul>
	<li> CSC:llä tallennettuna:
		<ul>
			<li>ESA, <a href="https://a3s.fi/sentinel-readme/README.txt" target="_blank">Sentinel-2 products</a>, 
			processed to Level-2A (Surface Reflectance), a selection of mostly cloud-free products from Finland. 
			Downloaded to CSC Allas by Maria Yli-Heikkilä (LUKE), Arttu Kivimäki (NLS/FGI) and Matias Heino (Aalto). JP2000 files.</li>
		</ul>
	<li>FMI:lla tallennettuna, <a href="https://pta.data.lit.fmi.fi/stac/root.json" target="_blank">FMI Tuulituhohaukka</a> 
	staattisesta STAC luettelosta, kaikki tiedostot COG:na:
		<ul>
			<li>ESA/FMI, Sentinel-2 11-days surface reflectance mosaics.</li>
			<li>ESA/FMI, Sentinel-1 daily backscatter mosaics: VV and VH polarisation.</li>
			<li>ESA/FMI, Sentinel-1 11 days backscatter mosaics: VV and VH polarisation.</li>	
			<li>ESA/FMI, Sentinel-2 annual surface reflectance mosaics.</li>	
			<li>ESA/SYKE, Sentinel-2 monthly index mosaics: NDVI, NDBI, NDMI, NDSI, NDTI.</li>
			<li>ESA, Sentinel-1 backscatter tiles: VV and VH polarisation.</li>
			<li>USGS/SYKE, Landsat (4 and 5) yearly index mosaics: NDVI, NDBI, NDMI, NDSI, NDTI. Valitettavasti tämän aineiston kanssa on FMI:n puolella teknisiä ongelmia, joten tiedostojen lataus ei onnistu.</li>	
			<li>NLS, Digital terrain model products: DTM, aspect, slope.</li>
			<li>Finnish Forest center, Canopy height model.</li>
			<li>LUKE, Multi-source forest inventory products.</li>	
			<li>LUKE, Forest wind damage risk map.</li>
			<li>FMI, Daily wind damage risk map.</li>	
		</ul>
	</li>
</ul>

<p>
	Paitulin STAC rajapinnan osoite on: <a href="https://paituli.csc.fi/geoserver/ogc/stac" target="_blank">https://paituli.csc.fi/geoserver/ogc/stac</a>
</p>
<p>
	<a href="https://radiantearth.github.io/stac-browser/#/external/paituli.csc.fi/geoserver/ogc/stac/?.language=en" target="_blank">
	STAC Browser Paituli STAC:lle</a>, selaimen kautta on nähtävillä mitä kokoelmia on saatavilla, etsiä tuotteita sekä esikatsella COG-tiedostoja.
</p>
<p>
	CSC on valmistellut esimerkkiskriptejä <a href="https://www.github.com/csc-training/geocomputing/blob/master/python/STAC" target="_blank">Pythonille</a> 
	ja <a href="https://www.github.com/csc-training/geocomputing/blob/master/R/STAC" target="_blank">R:lle</a>, jotka havainnollistavat miten etsiä ja käyttää dataa STAC rajapinnasta ja mitkä ovat keskeiset tarvittavat kirjastot. 
</p>
<p>
	Paituli STAC on operoinnin alkuvaiheilla, joten enemmän kokoelmia tullaan lisäämään. 
	Seuraavaksi lisätään <a href="https://vm0160.kaj.pouta.csc.fi/geocubes/datasets/" target="_blank">Geoportti geocubes</a> 
	ja <a href="metadata.html" target="_blank">Paitulin omat aineistot</a>.
</p>
<p>
	Paituli STAC on kehitetty <a href="https://www.aka.fi/en/" target="_blank"> Suomen Akatemian </a> 
	<a href="https://www.geoportti.fi/" target="_blank">Geoportti</a> rahoituksella.
</p>

<p>Jos teillä on palautetta, olkaa yhteydessä CSC:en, servicedesk@csc.fi</p>
