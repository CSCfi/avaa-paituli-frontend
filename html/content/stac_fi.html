<h1>Paituli STAC - Spatio Temporal Asset Catalog</h1>
<h3>STAC yleisesti</h3>	
<p>
	<a href="https://stacspec.org/en/" target="_blank">STAC</a> on avoin spesifikaatio paikkatiedon kuvailemiseksi, jotta se on helposti <strong>etsittävissä ja ladattavissa</strong>. 
	STAC sisältää aineistojen metatietoja ja linkkejä varsinaisiin tiedostoihin, jotka ovat yleisesti tallennettuna pilvessä. 
	STAC luetteloita on olemassa maailmanlaajuisesti ja STAC Index -sivusto sisältää <a href="https://stacindex.org/catalogs" target="_blank">listan STAC luetteloista</a>.
	STAC on eniten käytettynä rasteridatan kanssa, mutta sitä voidaan käyttää myös vektori- ja pistepilvidatan kanssa. 
	Yleisin käyttötarkoitus on kaukokartoituskuvat. Rasteridatalle Cloud-Optimized GeoTiff (COG) on paras tiedostovaihtoehto.
</p>

<p>
	STAC pääkäsitteet (suomennokset eivät ole vakiintuneita): 
</p>

<ul dir="auto">
	<li><strong>Catalog</strong> (suom. Luettelo) - yleinen metatieto ja linkit saatavilla oleviin Kokoelmiin.</li>
	<li><strong>Collection</strong> (suom. Kokoelma)- Kokoelmaan liittyvä metatieto ja linkit saatavilla oleviin Tuotteisiin. Yksi Kokoelma sisältää samantyyppisiä Tuotteita.</li>
	<li><strong>Item</strong> (suom. Tuote) - ydinyksikkö, joka kuvailee dataa tietyltä ajalta ja paikalta. Tuote sisältää yhden tai useampia Resursseja.</li>
	<li><strong>Asset</strong> (suom. Resurssi)- Tuotteeseen liittyvät tiedostot ja linkit, jotka voivat olla datatiedostoja tai linkkejä metatietoon jne.</li>
</ul>

<img align=middle src="./STAC.png" style="width: 100%"/>

<p>
	STAC on mahdollista toteuttaa staattisena kokoelmana JSON-tiedostoja tai ohjelmointirajapintana (API:na). Etsiessä API:n kautta tarvitaan erillisiä työkaluja.
	<a href="https://stacindex.org/ecosystem#/" target="_blank">STAC loppukäyttäjän työkaluja</a> on tarjolla 
	<a href="https://pystac-client.readthedocs.io/en/latest" target="_blank">Pythonille </a>, 
	<a href="https://cran.r-project.org/web/packages/rstac/index.html" target="_blank">R:lle</a>, 
	<a href="https://stac-utils.github.io/qgis-stac-plugin/" target="_blank">QGIS:lle</a> 
	sekä <a href="https://github.com/JuliaClimate/STAC.jl" target="_blank">Julia:lle</a>. 
	<a href="https://radiantearth.github.io/stac-browser/" target="_blank">STAC Browser:ia</a> voi käyttää etsimään tietoa STAC API:sta selaimen avulla.
</p>

<p>
	Etsiessä tietoa STAC luetteloista tärkeimmät kriteerit ovat sijainti, aika sekä kokoelman nimi. 
	Tuotteet voivat sisältää myös lisätietoja, esimerkiksi optisten kuvien pilvisyyttä, jota voidaan sisällyttää hakuehdoissa.
	Ladattaessa on mahdollista määritellä vaadittu pikselikoko, jos data sisältää overview-kuvia (COG) ja kyseinen lataustyökalu tukee sitä.
</p>
	
<p>
	Pythonille ja R:lle on kirjastoja datan etsimiseen STAC API:sta. 
	Aika-ulottuvuuden sisältävälle rasteridatalle on olemassa lisäksi paketteja datan lataukseen ja analysointiin STAC API:sta.
	Nämä työkalut myös tukevat rinnakkaislaskentaa, jolloin suurten aineistojen käsittely on helposti mahdollista.
	Ensisijaiset Python kirjastot STAC:in käyttämiseen ovat <a href="https://pystac-client.readthedocs.io/en/latest" target="_blank">pystac-client</a>, 
	<a href="https://stackstac.readthedocs.io/" target="_blank">stackstac</a>, 
	<a href="https://xarray.dev/" target="_blank">xarray</a> ja <a href="https://www.dask.org/" target="_blank">dask</a>.
	Ensisijaiset R kirjastot ovat <a href="https://cran.r-project.org/web/packages/rstac/index.html" target="_blank">rstac</a> ja 
	<a href="https://cran.r-project.org/web/packages/gdalcubes/index.html" target="_blank">gdalcubes</a>. 
	Lisätietoja saa sivun lopussa mainituista esimerkeistä.
</p>

<h3>Paituli STAC</h3>	
<p> Paituli STAC luettelo sisältää suomalaista dataa. Tällä hetkellä se sisältää:

<ul>
	<li> CSC:llä tallennettuna:
		<ul>
			<li>ESA, <a href="https://a3s.fi/sentinel-readme/README.txt" target="_blank">Sentinel-2 products</a>, 
			processed to Level-2A (Surface Reflectance), a selection of mostly cloud-free products from Finland. 
			Downloaded to CSC Allas by Maria Yli-Heikkilä (LUKE), Arttu Kivimäki (NLS/FGI) and Matias Heino (Aalto). JP2000 files.</li>
		</ul>
	<li>Tallennettuna FMI:lla, <a href="https://pta.data.lit.fmi.fi/stac/root.json" target="_blank">FMI Tuulituhohaukka</a> 
	staattisesta STAC luettelosta, kaikki tiedostot COG:na:
		<ul>
			<li>ESA/FMI, Sentinel-2 11-days surface reflectance mosaics.</li>
			<li>ESA/FMI, Sentinel-1 daily backscatter mosaics: VV and VH polarisation.</li>
			<li>ESA/FMI, Sentinel-1 11 days backscatter mosaics: VV and VH polarisation.</li>	
			<li>ESA/FMI, Sentinel-2 annual surface reflectance mosaics.</li>	
			<li>ESA/SYKE, Sentinel-2 monthly index mosaics: NDVI, NDBI, NDMI, NDSI, NDTI.</li>
			<li>ESA, Sentinel-1 backscatter tiles: VV and VH polarisation.</li>
			<li>USGS/SYKE, Landsat (4 and 5) yearly index mosaics: NDVI, NDBI, NDMI, NDSI, NDTI. Techinical problems with files on FMI side.</li>	
			<li>NLS, Digital terrain model products: DTM, aspect, slope.</li>
			<li>Finnish Forest center, Canopy height model.</li>
			<li>LUKE, Multi-source forest inventory products.</li>	
			<li>LUKE, Forest wind damage risk map.</li>
			<li>FMI, Daily wind damage risk map.</li>	
		</ul>
	</li>
</ul>

<p>
	Paitulin STAC API end-point on: <a href="https://paituli.csc.fi/geoserver/ogc/stac" target="_blank">https://paituli.csc.fi/geoserver/ogc/stac</a>
</p>
<p>
	<a href="https://radiantearth.github.io/stac-browser/#/external/paituli.csc.fi/geoserver/ogc/stac/?.language=en" target="_blank">
	STAC Browser Paituli STAC:lle</a>, selaimen kautta on nähtävillä mitä kokoelmia on saatavilla, etsiä tuotteita sekä esikatsella COG-tiedostoja.
</p>
<p>
	CSC on valmistellut esimerkkiskriptejä <a href="/csc-training/geocomputing/blob/master/python/STAC" target="_blank">Pythonille</a> 
	ja <a href="/csc-training/geocomputing/blob/master/R/STAC" target="_blank">R:lle</a>, jotka havainnollistavat miten etsiä ja käyttää dataa STAC API:sta. 
</p>
<p>
	Paituli STAC on operoinnin alkuvaiheilla, joten enemmän kokoelmia tullaan lisäämään. 
	Seuraavaksi lisätään <a href="https://vm0160.kaj.pouta.csc.fi/geocubes/datasets/" target="_blank">Geoportti geocubes</a> 
	ja <a href="metadata.html" target="_blank">Paitulin omat aineistot</a>.
</p>
<p>
	Paituli STAC on kehitetty <a href="https://www.aka.fi/en/" target="_blank"> Suomen Akatemian </a> ja <a href="https://www.geoportti.fi/" target="_blank">Geoportti</a> rahoituksella.
</p>

<p>Jos teillä on palautetta, olkaa yhteydessä CSC:en, servicedesk@csc.fi</p>
